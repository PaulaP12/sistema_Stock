{"remainingRequest":"/var/www/html/sistema_stock/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/sistema_stock/src/components/ViewCategories.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/sistema_stock/src/components/ViewCategories.vue","mtime":1624844882815},{"path":"/var/www/html/sistema_stock/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/sistema_stock/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBcGlSZXN0IGZyb20gIkAvbWl4aW5zL0FwaVJlc3QudnVlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtBcGlSZXN0XSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2F0ZWdvcmllczogW10sCiAgICAgIHBhcmFtOiAiY2F0ZWdvcmllcyIsCgogICAgICBkYXRhTmV3QWRkOnsKICAgICAgICBuYW1lQ2F0ZWdvcnk6IiIsCiAgICAgIH0sCiAgICAgIG1lc3NhZ2dlQWRkOicnLAogICAgICB2aWV3TWVzc2FnZTpmYWxzZSwKICAgICAgdmlld01lc3NhZ2VFcnJvcjpmYWxzZSwKICAgICAgdmlld01lc3NhZ2VEZWxldGU6ZmFsc2UsCiAgICAgIHZpZXdNZXNzYWdlRWRpdDpmYWxzZSwKICAgICAgc2hvd01vZGFsOiBmYWxzZSwKICAgICAgQWNjaW9uSW5pY2lhbDogdHJ1ZSwKICAgICAgCiAgICAgIC8vIEVkaXQgdmFyaWFibGUKICAgICAgZWRpdENsaWNrOmZhbHNlLAogICAgICBpZENhdGVnb3J5OjAsCiAgICAgIGlkQkQ6IDAsCiAgICAgIGRhdGFFZGl0OnsKCQluYW1lQ2F0ZWdvcnk6JycsCiAgICAgIH0sCiAgICAgIElkRWRpdDonJywKICAgICAgCiAgICAgIC8vIFBhZ2luYWNpw7NuCgkJY2F0ZWdvcmllc0ZvclBhZ2U6IDUsCgkJZGF0YVBhZ2VkOltdLAoJCXBhZ2VDdXJyZW50OjEKCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0SW5mbyh0aGlzLnBhcmFtKS50aGVuKChyZXMpID0+IHsKICAgICAgdGhpcy5jYXRlZ29yaWVzID0gcmVzOwogICAgICB0aGlzLmdldERhdGFQYWdlKDEpCiAgICB9KTsKICB9LAogIG1ldGhvZHM6ewogICAgYWRkQ2F0ZWdvcnkoKXsKICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmRhdGFOZXdBZGQpCiAgICAgIHRoaXMuYWRkRWxlbWVudCh0aGlzLnBhcmFtLCB0aGlzLmRhdGFOZXdBZGQpLnRoZW4oKHJlcyk9PnsKCiAgICAgICAgaWYocmVzLkVzdGFkbyA9PSAnU2F0aXNmYWN0b3JpbycpewogICAgICAgICAgdGhpcy5tZXNzYWdnZUFkZCA9IHJlcwogICAgICAgICAgdGhpcy52aWV3TWVzc2FnZSA9IHRydWUKICAgICAgICAgIHRoaXMudmlld01lc3NhZ2VFcnJvciA9IGZhbHNlCiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMudmlld01lc3NhZ2UgPSBmYWxzZSwgMzAwMCk7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICB0aGlzLm1lc3NhZ2dlQWRkID0gcmVzCiAgICAgICAgICB0aGlzLnZpZXdNZXNzYWdlRXJyb3IgPSB0cnVlCiAgICAgICAgICB0aGlzLnZpZXdNZXNzYWdlID0gZmFsc2UKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy52aWV3TWVzc2FnZUVycm9yID0gZmFsc2UsIDMwMDApOwogICAgICAgIH0KCiAgICAgICAgLy8gQWN0dWFsaXphciBsaXN0YQogICAgICAgIHRoaXMuZ2V0SW5mbyh0aGlzLnBhcmFtKS50aGVuKChyZWZyZXNoKSA9PiB7CiAgICAgICAgICB0aGlzLmNhdGVnb3JpZXMgPSByZWZyZXNoOwogICAgICAgIH0pOwogICAgICAgIAogICAgICB9KQogICAgfSwKICAgIHNob3dNb2RhbERlbGV0ZShpZCl7IAogICAgICB0aGlzLmlkQ2F0ZWdvcnkgPSBpZCAKICAgICAgdGhpcy5zaG93TW9kYWwgPSB0cnVlCiAgICB9LAoKICAgIGRlbGV0ZUNhdGVnb3J5KCl7CiAgICAgIHRoaXMuZGVsZXRlRWxlbWVudCh0aGlzLnBhcmFtLHRoaXMuaWRDYXRlZ29yeSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5jYXRlZ29yaWVzID0gcmVzOwogICAgICAgIHRoaXMuc2hvd01vZGFsID0gZmFsc2UKCiAgICAgICAgaWYocmVzLkVzdGFkbyA9PSAnU2F0aXNmYWN0b3JpbycpewogICAgICAgICAgdGhpcy5tZXNzYWdnZUFkZCA9IHJlcwogICAgICAgICAgdGhpcy52aWV3TWVzc2FnZURlbGV0ZSA9IHRydWUKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy52aWV3TWVzc2FnZURlbGV0ZSA9IGZhbHNlLCAzMDAwKTsKICAgICAgICAgIHRoaXMudmlld01lc3NhZ2UgPSBmYWxzZQogICAgICAgIH0KICAgICAgfSk7CgogICAgICB0aGlzLmdldEluZm8odGhpcy5wYXJhbSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5jYXRlZ29yaWVzID0gcmVzOwogICAgICB9KTsKICAgIH0sCiAgICAKICAgIGVkaXRDYXRlZ29yeUJ0bihpZExpc3RhKXsgCiAgICAgIC8vIElkIHF1ZSBzZSBlbmN1ZW50YSBlbiBsYSBiYXNlIGRlIGRhdG9zCiAgICAgIHRoaXMuaWRDYXRlZ29yeSA9IGlkTGlzdGEKICAgICAgdGhpcy5pZEJEID0gdGhpcy5jYXRlZ29yaWVzW3RoaXMuaWRDYXRlZ29yeV0uaWQKICAgICAgCiAgICAgIHRoaXMuZWRpdENsaWNrID0gdHJ1ZSAKICAgICAgCiAgICAgIGlmKHRoaXMuQWNjaW9uSW5pY2lhbCl7CiAgICAgICAgdGhpcy5BY2Npb25JbmljaWFsPSF0aGlzLkFjY2lvbkluaWNpYWwKICAgICAgfQogICAgfSwKICAgIGVkaXRDYXRlZ29yeSgpewogICAgICB0aGlzLmVkaXRFbGVtZW50KHRoaXMucGFyYW0sdGhpcy5pZEJELHRoaXMuZGF0YUVkaXQpLnRoZW4oKHJlcyk9PnsKICAgICAgICB0aGlzLmNhdGVnb3JpZXMgPSByZXM7CiAgICAgICAgdGhpcy5kYXRhRWRpdC5uYW1lQ2F0ZWdvcnkgPSAnJwogICAgICB9KQogICAgICAKICAgICAgdGhpcy5nZXRJbmZvKHRoaXMucGFyYW0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IHJlczsKICAgICAgfSk7CgogICAgICB0aGlzLnZpZXdNZXNzYWdlRWRpdCA9IHRydWUKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy52aWV3TWVzc2FnZUVkaXQgPSBmYWxzZQogICAgICAgIHRoaXMuZWRpdENsaWNrPSF0aGlzLmVkaXRDbGljawogICAgICB9LCAzMDAwKTsKICAgIH0sCiAgICAKICAgIC8vIFBhZ2luYWNpw7NuCgkKCXRvdGFsUGFnZXMoKXsKCQlyZXR1cm4gTWF0aC5jZWlsKHRoaXMuY2F0ZWdvcmllcy5sZW5ndGggLyB0aGlzLmNhdGVnb3JpZXNGb3JQYWdlKQoJfSwKCWdldERhdGFQYWdlKG51bWJlclBhZ2UpewoJCXRoaXMuZGF0YVBhZ2VkID0gW10KCQlsZXQgaW5pY2lvID0gKG51bWJlclBhZ2UgKiB0aGlzLmNhdGVnb3JpZXNGb3JQYWdlKSAtIHRoaXMuY2F0ZWdvcmllc0ZvclBhZ2UKCQlsZXQgZmluID0gKG51bWJlclBhZ2UgKiB0aGlzLmNhdGVnb3JpZXNGb3JQYWdlKQoJCXRoaXMuZGF0YVBhZ2VkID0gdGhpcy5jYXRlZ29yaWVzLnNsaWNlKGluaWNpbyxmaW4pCgl9LAoJcHJldmlvdXNQYWdlKCl7CgkJaWYodGhpcy5wYWdlQ3VycmVudCA+IDEpewoJCQl0aGlzLnBhZ2VDdXJyZW50LS0KCQl9CgkJdGhpcy5nZXREYXRhUGFnZSh0aGlzLnBhZ2VDdXJyZW50KQoJfSwKCW5leHRQYWdlKCl7CgkJaWYodGhpcy5wYWdlQ3VycmVudCA8IHRoaXMudG90YWxQYWdlcygpKXsKCQkJdGhpcy5wYWdlQ3VycmVudCsrCgkJfQoJCXRoaXMuZ2V0RGF0YVBhZ2UodGhpcy5wYWdlQ3VycmVudCkKCX0sCglpc0FjdGl2ZShudW1iZXJQYWdlKXsKCQlpZihudW1iZXJQYWdlID09IHRoaXMucGFnZUN1cnJlbnQpewoJCQlyZXR1cm4gJ2FjdGl2ZScKCQl9ZWxzZXsKCQkJcmV0dXJuICcnCgkJfQoJfQogfQp9Owo="},{"version":3,"sources":["ViewCategories.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ViewCategories.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <h3 class=\"title\">RUBROS</h3>\n    <a class=\"add\" v-if=\"AccionInicial\" @click=\"AccionInicial=!AccionInicial\">Añadir nuevo rubro</a>\n    <div class=\"row\">\n      <div :class=\"{'table-article col m8 l10': AccionInicial, 'table-article col m8 l4': !AccionInicial }\">\n        <table class=\"striped\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Rubro</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(category, index) in dataPaged\" :key=\"index\">\n              <td>{{ category.id }}</td>\n              <td class=\"nameCategory\">{{ category.nameCategory }}</td>\n              <td>\n                <font-awesome-icon @click=\"showModalDelete(category.id)\" class=\"icon\" style=\"color: red\" :icon=\"['fas', 'trash']\"/>\n              </td>\n              <td>\n                <font-awesome-icon @click=\"editCategoryBtn(index)\" class=\"icon\" style=\"color: blue\" :icon=\"['fas', 'edit']\"/>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        \n        <ul class=\"pagination\">\n\t\t\t<li v-on:click=\"previousPage()\"><a href=\"#!\"><i class=\"material-icons\">chevron_left</i></a></li>\n\t\t\t<li v-for=\"(page,index) of totalPages()\" :key=\"index\" v-on:click=\"getDataPage(page)\" :class=\"isActive(page)\"><a href=\"#!\">{{page}}</a></li>\n\t\t\t<li class=\"waves-effect\" v-on:click=\"nextPage()\"><a href=\"#!\"><i class=\"material-icons\">chevron_right</i></a></li>\n\t\t</ul>\n      </div>\n\n      <div class=\"col l6 form\" v-if=\"!AccionInicial\">\n        <h6>Agregar Rubro</h6>\n        <div class=\"\">\n          <div class=\"input-field col\">\n            <input v-if=\"!editClick\" v-model=\"dataNewAdd.nameCategory\" type=\"text\" placeholder=\"NUEVO RUBRO\"/>\n\n            <input v-if=\"editClick\" v-model=\"dataEdit.nameCategory\" type=\"text\" placeholder=\"RUBRO A EDITAR\"/>\n            \n            <a @click=\"addCategory()\" v-if=\"!editClick\" class=\"waves-effect waves-light btn\">Añadir Rubro</a>\n            <a v-if=\"editClick\" class=\"waves-effect waves-light btn indigo darken-1\" @click=\"editCategory()\">Editar Rubro</a>\n            <a v-if=\"editClick\" @click=\"editClick=!editClick\">No quiero editar</a>\n          </div>\n        </div>\n        \n        <!-- Mensajes agregar nuevo rubro -->\n        <div v-show=\"viewMessage == true\">\n          <span class=\"message\">{{messaggeAdd.Estado}} - {{messaggeAdd.Mensaje}} <font-awesome-icon class=\"icon\" :icon=\"['fas','check-circle']\"></font-awesome-icon></span>\n        </div>\n        <div v-show=\"viewMessageError == true\">\n          <span class=\"messageError\"><font-awesome-icon class=\"icon\" :icon=\"['fas','exclamation-circle']\"></font-awesome-icon> {{messaggeAdd.Estado}} - {{messaggeAdd.Mensaje}}</span>\n        </div>\n        <!--Mensaje Borrar rubro-->\n        <div v-show=\"viewMessageDelete == true\">\n          <span class=\"messageError\"><font-awesome-icon class=\"icon\" :icon=\"['fas','trash']\"></font-awesome-icon> {{messaggeAdd.Estado}} - {{messaggeAdd.Mensaje}}</span>\n        </div>\n        <!--Mensaje Editar rubro-->\n        <div v-show=\"viewMessageEdit == true\">\n\t\t\t<span class=\"message\"><font-awesome-icon class=\"icon\" :icon=\"['fas','edit']\"></font-awesome-icon> Rubro editado</span>\n\t\t</div>\n      </div>\n\n    </div>\n\n    <div v-if=\"showModal\">\n      <transition name=\"modal\">\n        <div class=\"modal-mask\">\n          <div class=\"modal-wrapper\">\n            <div class=\"modal-container center-align\">\n\n              <div class=\"modal-header\">\n                <slot name=\"header\">\n                  ¿Desea borrar el rubro?\n                </slot>\n              </div>\n\n              <div class=\"modal-footer\">\n                <slot name=\"footer\">\n                  <a class=\"waves-effect waves-light btn red\" @click=\"deleteCategory()\">SI</a>\n                  <a class=\"waves-effect waves-light btn grey darken-1\" @click=\"showModal=false\">NO</a>\n                </slot>\n              </div>\n            </div>\n          </div>\n        </div>\n      </transition>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ApiRest from \"@/mixins/ApiRest.vue\";\n\nexport default {\n  mixins: [ApiRest],\n  data() {\n    return {\n      categories: [],\n      param: \"categories\",\n\n      dataNewAdd:{\n        nameCategory:\"\",\n      },\n      messaggeAdd:'',\n      viewMessage:false,\n      viewMessageError:false,\n      viewMessageDelete:false,\n      viewMessageEdit:false,\n      showModal: false,\n      AccionInicial: true,\n      \n      // Edit variable\n      editClick:false,\n      idCategory:0,\n      idBD: 0,\n      dataEdit:{\n\t\tnameCategory:'',\n      },\n      IdEdit:'',\n      \n      // Paginación\n\t\tcategoriesForPage: 5,\n\t\tdataPaged:[],\n\t\tpageCurrent:1\n\n    };\n  },\n  created() {\n    this.getInfo(this.param).then((res) => {\n      this.categories = res;\n      this.getDataPage(1)\n    });\n  },\n  methods:{\n    addCategory(){\n      //console.log(this.dataNewAdd)\n      this.addElement(this.param, this.dataNewAdd).then((res)=>{\n\n        if(res.Estado == 'Satisfactorio'){\n          this.messaggeAdd = res\n          this.viewMessage = true\n          this.viewMessageError = false\n          setTimeout(() => this.viewMessage = false, 3000);\n        }else{\n          this.messaggeAdd = res\n          this.viewMessageError = true\n          this.viewMessage = false\n          setTimeout(() => this.viewMessageError = false, 3000);\n        }\n\n        // Actualizar lista\n        this.getInfo(this.param).then((refresh) => {\n          this.categories = refresh;\n        });\n        \n      })\n    },\n    showModalDelete(id){ \n      this.idCategory = id \n      this.showModal = true\n    },\n\n    deleteCategory(){\n      this.deleteElement(this.param,this.idCategory).then((res) => {\n        this.categories = res;\n        this.showModal = false\n\n        if(res.Estado == 'Satisfactorio'){\n          this.messaggeAdd = res\n          this.viewMessageDelete = true\n          setTimeout(() => this.viewMessageDelete = false, 3000);\n          this.viewMessage = false\n        }\n      });\n\n      this.getInfo(this.param).then((res) => {\n        this.categories = res;\n      });\n    },\n    \n    editCategoryBtn(idLista){ \n      // Id que se encuenta en la base de datos\n      this.idCategory = idLista\n      this.idBD = this.categories[this.idCategory].id\n      \n      this.editClick = true \n      \n      if(this.AccionInicial){\n        this.AccionInicial=!this.AccionInicial\n      }\n    },\n    editCategory(){\n      this.editElement(this.param,this.idBD,this.dataEdit).then((res)=>{\n        this.categories = res;\n        this.dataEdit.nameCategory = ''\n      })\n      \n      this.getInfo(this.param).then((res) => {\n        this.categories = res;\n      });\n\n      this.viewMessageEdit = true\n      setTimeout(() => {\n        this.viewMessageEdit = false\n        this.editClick=!this.editClick\n      }, 3000);\n    },\n    \n    // Paginación\n\t\n\ttotalPages(){\n\t\treturn Math.ceil(this.categories.length / this.categoriesForPage)\n\t},\n\tgetDataPage(numberPage){\n\t\tthis.dataPaged = []\n\t\tlet inicio = (numberPage * this.categoriesForPage) - this.categoriesForPage\n\t\tlet fin = (numberPage * this.categoriesForPage)\n\t\tthis.dataPaged = this.categories.slice(inicio,fin)\n\t},\n\tpreviousPage(){\n\t\tif(this.pageCurrent > 1){\n\t\t\tthis.pageCurrent--\n\t\t}\n\t\tthis.getDataPage(this.pageCurrent)\n\t},\n\tnextPage(){\n\t\tif(this.pageCurrent < this.totalPages()){\n\t\t\tthis.pageCurrent++\n\t\t}\n\t\tthis.getDataPage(this.pageCurrent)\n\t},\n\tisActive(numberPage){\n\t\tif(numberPage == this.pageCurrent){\n\t\t\treturn 'active'\n\t\t}else{\n\t\t\treturn ''\n\t\t}\n\t}\n }\n};\n</script>\n\n<style scoped>\n.form{\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.title{text-align: center;}\n.add{margin-left: 615px;}\n\n.row{\n  margin-left: 200px;\n}\n.icon {\n  cursor: pointer;\n}\n.btn {\n  margin: 15px 10px;\n  background-color: #6bc05c;\n}\n.btn:hover {\n  background-color: #4a8640;\n}\n.message{\n  padding:10px;\n  color:#ffffff;\n  background-color: #93dd86;\n}\n.messageError{\n  padding:10px;\n  color:#ffffff;\n  background-color: #b83e35;\n  margin-left:30px;\n}\n.nameCategory{\n  padding-right:30px;\n}\n\n/* ESTILOS MODAL */\n.modal-mask {\n  position: fixed;\n  z-index: 9998;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: table;\n  transition: opacity 0.3s ease;\n}\n\n.modal-wrapper {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.modal-container {\n  width: 300px;\n  height: 120px;\n  margin: 0px auto;\n  padding: 20px 30px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.33);\n  transition: all 0.3s ease;\n  font-family: Helvetica, Arial, sans-serif;\n}\n\n.modal-header h3 {\n  margin: 10px;\n  color: #42b983;\n}\n\n.modal-enter {\n  opacity: 0;\n}\n\n.modal-leave-active {\n  opacity: 0;\n}\n\n.modal-enter .modal-container,.modal-leave-active .modal-container {\n  -webkit-transform: scale(1.1);\n  transform: scale(1.1);\n}\n\n.active{background-color: #476f7e !important}\n.pagination{text-align:center}\n</style>\n"]}]}